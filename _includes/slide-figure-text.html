{%- comment -%}
========================================================================
_includes/slide-figure-text.html
A specialized slide layout that auto-detects content.

- If text (text_items or text) is provided, it creates a two-column
layout (figure + caption in one col, text in the other).
- If NO text is provided, it creates a single-column, centered
figure layout.
========================================================================
Usage (Two-Column):
{% include slide-figure-text.html
title="Vertical Figure Layout"
image_src="/img/my-vertical-photo.png"
text_items="Bullet point one; Bullet point two"
%}

Usage (Single-Column):
{% include slide-figure-text.html
title="Full-Width Figure"
image_src="/img/my-horizontal-photo.png"
text_items=""
%}
========================================================================
{%- endcomment -%}

{%- comment -%}
--- Check if any text content exists ---
FIX: We must check the *size* of the string after stripping
whitespace. An empty string "" is 'truthy' but has a size of 0.
---
{%- endcomment -%}
{% assign text_items_size = include.text_items | strip | size %}
{% assign text_size = include.text | strip | size %}

{% assign has_text_content = false %}
{% if text_items_size > 0 or text_size > 0 %}
{% assign has_text_content = true %}
{% endif %}


<section class="figure-slide">

{% if include.title %}
<h2>{{ include.title }}</h2>
{% endif %}

{%- comment -%}
========================================================================
A) TWO-COLUMN LAYOUT (Text + Figure)
Render this block if text content was found.
========================================================================
{%- endcomment -%}
{% if has_text_content %}

{%- comment -%} --- Define the Image Column (Figure + Caption) --- {%- endcomment -%}
{% capture image_col %}
<div class="col" style="flex:1; min-width:300px;">
<div class="figure-container">
<img src="{{ include.image_src }}"
alt="{{ include.caption_title | default: 'Figure' }}"
style="width:100%; height:auto; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
</div>
{% if include.caption_title or include.caption_body %}
<p class="caption" style="font-size:0.95rem; color:#555; margin-top:0.6rem;">
{% if include.fig_num %}<strong>Figure {{ include.fig_num }}:</strong> {% endif %}
<strong>{{ include.caption_title }}</strong> {{ include.caption_body }}
</p>
{% endif %}
</div>
{% endcapture %}

{%- comment -%} --- Define the Text Column (Bullets or Paragraph) --- {%- endcomment -%}
{% capture text_col %}
<div class="col" style="flex:1; min-width:300px;">
{% if text_items_size > 0 %}
<ul style="padding-left: 1.2rem;">
{% if include.text_items contains ";" or include.text_items contains "," %}
{% assign items = include.text_items | replace: ";", "," | split: "," %}
{% for it in items %}
<li style="margin-bottom: 0.5rem;">{{ it | strip }}</li>
{% endfor %}
{% else %}
{% for it in include.text_items %}
<li style="margin-bottom: 0.5rem;">{{ it }}</li>
{% endfor %}
{% endif %}
</ul>
{% elsif text_size > 0 %}
{{ include.text | markdownify }}
{% endif %}
</div>
{% endcapture %}

{%- comment -%} --- Render the Two-Column Container --- {%- endcomment -%}
<div class="slide-two-col" style="display:flex; gap:1.5rem; align-itemsV:flex-start; flex-wrap:wrap;">
{% if include.image_align == "right" %}
{{ text_col }}
{{ image_col }}
{% else %}
{{ image_col }}
{{ text_col }}
{% endif %}
</div>

{%- comment -%}
========================================================================
B) SINGLE-COLUMN LAYOUT (Figure Only)
Render this block if NO text content was found.
========================================================================
{%- endcomment -%}
{% else %}

<div class="slide-single-col-wrapper"
style="display: flex;
justify-content: center;
align-items: center;
height: 100%;">

<div class="slide-single-col" style="width: 100%;">
<div class="figure-container">
<img src="{{ include.image_src }}"
alt="{{ include.caption_title | default: 'Figure' }}"
style="width:100%; height:auto; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
</div>
{% if include.caption_title or include.caption_body %}
<p class="caption" style="font-size:0.95rem; color:#555; margin-top:0.6rem; text-align: center;">
{% if include.fig_num %}<strong>Figure {{ include.fig_num }}:</strong> {% endif %}
<strong>{{ include.caption_title }}</strong> {{ include.caption_body }}
</p>
{% endif %}
</div>

</div>

{% endif %}

</section>