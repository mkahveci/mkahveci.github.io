{% assign book-count = 0 %}
{% assign journal-count = 0 %}
{% assign conference-count = 0 %}

{% assign sorted = site.pages | sort: 'year' | reverse %}

{% for book in sorted %}
{% if book.book %}
{% if book.projectid contains page.projectid %}
{% assign book-count = book-count | plus: 1 %}
{% endif %}
{% endif %}
{% endfor %}

{% for journal in sorted %}
{% if journal.journal %}
{% if journal.projectid contains page.projectid %}
{% assign journal-count = journal-count | plus: 1 %}
{% endif %}
{% endif %}
{% endfor %}

{% for conference in sorted %}
{% if conference.conference %}
{% if conference.projectid contains page.projectid %}
{% assign conference-count = conference-count | plus: 1 %}
{% endif %}
{% endif %}
{% endfor %}

{% if book-count > 0 or journal-count > 0 or conference-count > 0  %}

## Project Publications

{% endif %}


{% if book-count > 0 %}

### Books

{% for book in sorted %}
{% if book.book %}
{% if book.projectid contains page.projectid %}
<p><b>{{ book-count }}</b>.&nbsp;&nbsp;{{ book.ref }}  <a class="noCrossRef" href="{{ site.urlx }}{{ book.url }}"><i class="fa fa-link"></i></a>
</p>
{% assign book-count = book-count | minus: 1 %}
{% endif %}
{% endif %}
{% endfor %}

{% endif %}


{% if journal-count > 0 %}

### Journal Articles

{% for journal in sorted %}
{% if journal.journal %}
{% if journal.projectid contains page.projectid %}
<p><b>{{ journal-count }}</b>.&nbsp;&nbsp;{{ journal.ref }}  <a class="noCrossRef" href="{{ site.urlx }}{{ journal.url }}"><i class="fa fa-link"></i></a>
</p>
{% assign journal-count = journal-count | minus: 1 %}
{% endif %}
{% endif %}
{% endfor %}

{% endif %}


{% if conference-count > 0 %}

### Conference Papers

{% for conference in sorted %}
{% if conference.conference %}
{% if conference.projectid contains page.projectid %}
<p><b>{{ conference-count }}</b>.&nbsp;&nbsp;{{ conference.ref }}  <a class="noCrossRef" href="{{ site.urlx }}{{ conference.url }}"><i class="fa fa-link"></i></a>
</p>
{% assign conference-count = conference-count | minus: 1 %}
{% endif %}
{% endif %}
{% endfor %}

{% endif %}